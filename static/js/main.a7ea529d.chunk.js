(window.webpackJsonpweb=window.webpackJsonpweb||[]).push([[0],{31:function(e,t,n){e.exports=n(44)},40:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(22),s=n.n(l),o=n(7),c="",m=function(e){c=e},i=function(){return c},u=n(10),d=n.n(u),f=n(12),p=n(8),b=n(16),g=n(17),y=n.n(g),E=n(14);function h(){var e=Object(b.a)(["\n    query Users {\n  users {\n    first_name\n    last_name\n    id\n    age\n    phone_number\n  }\n}\n    "]);return h=function(){return e},e}function v(){var e=Object(b.a)(["\n    mutation register($first_name: String!, $last_name: String!, $password: String!, $age: String!, $phone_number: String!) {\n  register(first_name: $first_name, last_name: $last_name, password: $password, age: $age, phone_number: $phone_number) {\n    successful\n    error\n  }\n}\n    "]);return v=function(){return e},e}function w(){var e=Object(b.a)(["\n    mutation login($first_name: String!, $last_name: String!, $password: String!) {\n  login(first_name: $first_name, last_name: $last_name, password: $password) {\n    accessToken\n    refreshToken\n  }\n}\n    "]);return w=function(){return e},e}function B(){var e=Object(b.a)(["\n    mutation editAccount($userId: Float!, $first_name: String!, $last_name: String!, $password: String!, $age: String!, $phone_number: String!) {\n  editAccount(userId: $userId, first_name: $first_name, last_name: $last_name, password: $password, age: $age, phone_number: $phone_number)\n}\n    "]);return B=function(){return e},e}var _=y()(B());var I=y()(w());var N=y()(v());var k=y()(h());n(40);var x=n(13),O=n.n(x),j=function(){var e=i();if(!e)return!1;try{var t=O()(e).exp;return!(Date.now()>=1e3*t)}catch(n){return!1}},S=function(e){var t,n=e.props,a=n.first_name,l=n.setFirstName,s=n.last_name,o=n.setLastName,c=n.password,u=n.setPassword,b=n.age,g=n.setAge,y=n.phone_number,h=n.setPhoneNumber,v=E.b(_,t),w=Object(p.a)(v,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{marginBottom:"15px"}},"Edit your account",r.a.createElement("i",{style:{marginLeft:"20px"},className:"fa fa-sign-out","aria-hidden":"true",onClick:function(){return function(){try{m(" "),localStorage.removeItem("urd"),window.location.reload()}catch(e){}}()}})),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"container"},r.a.createElement(P,{props:{first_name:a,setFirstName:l,last_name:s,setLastName:o,password:c,setPassword:u}}),r.a.createElement("div",{className:"input-box",style:{width:"85%",marginLeft:"5%"}},r.a.createElement("input",{onClick:function(){try{document.getElementById("age-label").style.transform="translateY(0)"}catch(e){}},onFocus:function(){try{document.getElementById("age-label").style.transform="translateY(0)"}catch(e){}},onBlur:function(){b||(document.getElementById("age-label").style.transform="")},value:b,onChange:function(e){return g(e.target.value)}}),r.a.createElement("label",{id:"age-label"},"Age")),r.a.createElement("div",{className:"input-box",style:{width:"85%",marginLeft:"5%"}},r.a.createElement("input",{onClick:function(){try{document.getElementById("pn-label").style.transform="translateY(0)"}catch(e){}},onFocus:function(){try{document.getElementById("pn-label").style.transform="translateY(0)"}catch(e){}},onBlur:function(){y||(document.getElementById("pn-label").style.transform="")},value:y,onChange:function(e){return h(e.target.value)}}),r.a.createElement("label",{id:"pn-label"},"Phone Number")))),r.a.createElement("div",{className:"center"},r.a.createElement("button",{className:"login-btn",onClick:Object(f.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i())&&(r=O()(t),n=r.userId),e.next=4,w({variables:{age:b,first_name:a,last_name:s,password:c,phone_number:y,userId:n}});case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)})))},"SUBMIT")))},$=function(e){for(var t=0;t<e.length;t++)try{document.getElementById("".concat(e[t],"-label")).style.color="black",document.getElementById("".concat(e[t],"-input")).style.borderBottom="1px solid black"}catch(n){}},F=function(e){var t=e.first_name,n=e.last_name,a=e.password,r=e.phone_number;if(!t||!n||!a||!r){if(!t)try{document.getElementById("fn-label").style.color="red",document.getElementById("fn-input").style.borderBottom="1px solid red"}catch(l){}if(!n)try{document.getElementById("ln-label").style.color="red",document.getElementById("ln-input").style.borderBottom="1px solid red"}catch(s){}if(!a)try{document.getElementById("p-label").style.color="red",document.getElementById("p-input").style.borderBottom="1px solid red"}catch(o){}if(!r)try{document.getElementById("pn-label").style.color="red",document.getElementById("pn-input").style.borderBottom="1px solid red"}catch(c){}return document.getElementById("error-zone").innerHTML="Please fill in the following fields",!1}return!0},L=function(e){var t,n=e.props,a=n.first_name,l=n.setFirstName,s=n.last_name,o=n.setLastName,c=n.password,m=n.setPassword,i=n.age,u=n.setAge,b=n.phone_number,g=n.setPhoneNumber,y=n.setRegister,h=E.b(N,t),v=Object(p.a)(h,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("h5",{style:{textAlign:"center",color:"blue"},onClick:function(){}},r.a.createElement("span",{className:"noselect",onClick:function(){y(!1)}},"Or Log In")),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"container"},r.a.createElement(P,{props:{first_name:a,setFirstName:l,last_name:s,setLastName:o,password:c,setPassword:m}}),r.a.createElement("div",{className:"input-box",style:{width:"85%",marginLeft:"5%"}},r.a.createElement("input",{onClick:function(){try{document.getElementById("age-label").style.transform="translateY(0)"}catch(e){}},onFocus:function(){try{document.getElementById("age-label").style.transform="translateY(0)"}catch(e){}},onBlur:function(){i||(document.getElementById("age-label").style.transform="")},value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",{id:"age-label"},"Age (Optional)")),r.a.createElement("div",{className:"input-box",style:{width:"85%",marginLeft:"5%"}},r.a.createElement("input",{id:"pn-input",onClick:function(){try{document.getElementById("pn-label").style.transform="translateY(0)"}catch(e){}},onFocus:function(){try{document.getElementById("pn-label").style.transform="translateY(0)"}catch(e){}},onBlur:function(){b||(document.getElementById("pn-label").style.transform="")},value:b,onChange:function(e){return g(e.target.value)}}),r.a.createElement("label",{id:"pn-label"},"Phone Number")))),r.a.createElement("span",{className:"center",style:{color:"red"},id:"error-zone"}),r.a.createElement("div",{className:"center"},r.a.createElement("button",{className:"login-btn",onClick:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),$(["fn","ln","p","pn"]),F({first_name:a,last_name:s,password:c,phone_number:b})){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,v({variables:{age:i,first_name:a,last_name:s,password:c,phone_number:b}});case 6:if((n=e.sent).data.register.successful)window.location.reload();else try{document.getElementById("error-zone").innerHTML+=n.data.register.error}catch(r){}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Sign Up")))},C=function(){var e,t=Object(a.useState)(""),n=Object(p.a)(t,2),l=n[0],s=n[1],o=Object(a.useState)(""),c=Object(p.a)(o,2),u=c[0],b=c[1],g=Object(a.useState)(""),y=Object(p.a)(g,2),h=y[0],v=y[1],w=E.c(k,e),B=w.data,_=w.loading,N=Object(a.useState)(!1),x=Object(p.a)(N,2),$=x[0],F=x[1],C=Object(a.useState)(""),Y=Object(p.a)(C,2),T=Y[0],A=Y[1],U=Object(a.useState)(""),z=Object(p.a)(U,2),D=z[0],M=z[1],q=function(e){return E.b(I,e)}(),H=Object(p.a)(q,1)[0];if(Object(a.useEffect)((function(){if(l)try{document.getElementById("fn-label").style.transform="translateY(0)"}catch(e){}if(u)try{document.getElementById("ln-label").style.transform="translateY(0)"}catch(t){}if(T)try{document.getElementById("age-label").style.transform="translateY(0)"}catch(n){}if(D)try{document.getElementById("pn-label").style.transform="translateY(0)"}catch(a){}})),_)return r.a.createElement("div",null,"loading...");if(!B)return r.a.createElement("div",null);var J=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&u&&h){e.next=12;break}if(document.getElementById("fn-label").style.color="black",document.getElementById("fn-input").style.borderBottom="1px solid black",document.getElementById("ln-label").style.color="black",document.getElementById("ln-input").style.borderBottom="1px solid black",document.getElementById("p-label").style.color="black",document.getElementById("p-input").style.borderBottom="1px solid black",!l)try{document.getElementById("fn-label").style.color="red",document.getElementById("fn-input").style.borderBottom="1px solid red"}catch(n){}if(!u)try{document.getElementById("ln-label").style.color="red",document.getElementById("ln-input").style.borderBottom="1px solid red"}catch(a){}if(!h)try{document.getElementById("p-label").style.color="red",document.getElementById("p-input").style.borderBottom="1px solid red"}catch(r){}e.next=16;break;case 12:return e.next=14,H({variables:{first_name:l,last_name:u,password:h}});case 14:(t=e.sent)&&t.data&&(m(t.data.login.accessToken||""),localStorage.setItem("urd",t.data.login.refreshToken||""),window.location.reload());case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"pageWrapper"},r.a.createElement("div",{className:"verticle-align"},r.a.createElement("div",{className:"horizontal-align"},r.a.createElement("div",{className:"contentWrapper"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"text"},r.a.createElement("h1",null,"Users :"),r.a.createElement("ul",null,B.users.map((function(e,t){var n,a=i();a&&(n=O()(a).userId);return j()&&B.users[t].id===n?(""===l&&""===u&&(s(B.users[t].first_name),b(B.users[t].last_name),A(B.users[t].age),M(B.users[t].phone_number)),r.a.createElement("li",{key:t},"* ",e.first_name,","," ",e.last_name)):r.a.createElement("li",{key:t},e.first_name,","," ",e.last_name)}))))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"login-box"},j()?r.a.createElement(S,{props:{first_name:l,setFirstName:s,last_name:u,setLastName:b,password:h,setPassword:v,age:T,setAge:A,phone_number:D,setPhoneNumber:M}}):r.a.createElement(r.a.Fragment,null,$?r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{props:{first_name:l,setFirstName:s,last_name:u,setLastName:b,password:h,setPassword:v,age:T,setAge:A,phone_number:D,setPhoneNumber:M,setRegister:F}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Log In"),r.a.createElement("h5",{style:{textAlign:"center",color:"blue"}},r.a.createElement("span",{className:"noselect",onClick:function(){F(!0)}},"Sign Up")),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"container"},r.a.createElement(P,{props:{first_name:l,setFirstName:s,last_name:u,setLastName:b,password:h,setPassword:v}}))),r.a.createElement("div",{className:"center"},r.a.createElement("button",{className:"login-btn",onClick:function(){return J()}},"LOG IN"))))))))))},P=function(e){var t=e.props,n=t.first_name,a=t.setFirstName,l=t.last_name,s=t.setLastName,o=t.password,c=t.setPassword;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-box",style:{marginLeft:"5%",width:"40%",display:"inline-block"}},r.a.createElement("input",{id:"fn-input",onClick:function(){try{document.getElementById("fn-label").style.transform="translateY(0)"}catch(e){}},onFocus:function(){try{document.getElementById("fn-label").style.transform="translateY(0)"}catch(e){}},onBlur:function(){n||(document.getElementById("fn-label").style.transform="")},value:n,onChange:function(e){return a(e.target.value)}}),r.a.createElement("label",{id:"fn-label"},"First Name")),r.a.createElement("div",{className:"input-box",style:{marginLeft:"5%",width:"40%",display:"inline-block"}},r.a.createElement("input",{id:"ln-input",onClick:function(){try{document.getElementById("ln-label").style.transform="translateY(0)"}catch(e){}},onFocus:function(){try{document.getElementById("ln-label").style.transform="translateY(0)"}catch(e){}},onBlur:function(){l||(document.getElementById("ln-label").style.transform="")},value:l,onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",{id:"ln-label"},"Last Name")),r.a.createElement("div",{className:"input-box",style:{width:"85%",marginLeft:"5%"}},r.a.createElement("input",{id:"p-input",onClick:function(){try{document.getElementById("p-label").style.transform="translateY(0)"}catch(e){}},onFocus:function(){try{document.getElementById("p-label").style.transform="translateY(0)"}catch(e){}},onBlur:function(){o||(document.getElementById("p-label").style.transform="")},value:o,onChange:function(e){return c(e.target.value)},type:"password"}),r.a.createElement("label",{id:"p-label"},"Password")))},Y=n(11),T=n(28),A=n(29),U=n(27),z=n(5),D=n(6),M=n(30),q=new T.a({}),H="",J=new z.a((function(e,t){return new D.a((function(n){var a;return Promise.resolve(e).then((function(e){var t=i();t&&e.setContext({headers:{authorization:"bearer ".concat(t)}})})).then((function(){a=t(e).subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})})).catch(n.error.bind(n)),function(){a&&a.unsubscribe()}}))}));H="https://inspected-job-app-server.herokuapp.com";var R=new Y.a({link:z.a.from([new M.a({accessTokenField:"accessToken",isTokenValidOrUndefined:function(){var e=i();if(!e)return!0;try{var t=O()(e).exp;return!(Date.now()>=1e3*t)}catch(n){return!1}},fetchAccessToken:function(){return fetch("".concat(H,"/refresh_token"),{method:"POST",credentials:"include"})},handleFetch:function(e){m(e)},handleError:function(e){console.warn("Your refresh token is invalid. Try to relogin"),console.error(e)}}),Object(U.a)((function(e){var t=e.graphQLErrors,n=e.networkError;console.log(t),console.log(n)})),J,new A.a({uri:"".concat(H,"/graphql"),credentials:"include"})]),cache:q});s.a.render(r.a.createElement(o.a,{client:R},r.a.createElement((function(){var e=Object(a.useState)(!0),t=Object(p.a)(e,2),n=t[0],l=t[1],s="";return s="https://inspected-job-app-server.herokuapp.com",Object(a.useEffect)((function(){var e=localStorage.getItem("urd")||"";fetch("".concat(s,"/refresh_token"),{method:"POST",credentials:"include",headers:{refreshToken:e||""}}).then(function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,a=n.accessToken,r=n.refreshToken,m(a),localStorage.setItem("urd",r||""),l(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),n?r.a.createElement("div",null,"loading..."):r.a.createElement(C,null)}),null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.a7ea529d.chunk.js.map